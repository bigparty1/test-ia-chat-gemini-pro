/**
 * Estilos globais da aplicação de Chat com IA.
 * 
 * Organização:
 * 1. Reset e configurações globais
 * 2. Layout principal (.app)
 * 3. Cabeçalho (header)
 * 4. Container de mensagens (.chat-container)
 * 5. Mensagens individuais (.message)
 * 6. Campo de entrada (.chat-input)
 */

/* ===== RESET E CONFIGURAÇÕES GLOBAIS ===== */

/* Remove margens e paddings padrão do navegador */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box; /* Inclui padding e border no cálculo de width/height */
}

/* Garante que html, body e #root ocupem 100% da viewport */
html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden; /* Evita scroll duplo (scroll será no .chat-container) */
}

/* Configurações base do body */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
    Ubuntu, Cantarell, sans-serif; /* Fontes do sistema para melhor performance */
  background: #f5f5f5;
}

/* ===== LAYOUT PRINCIPAL ===== */

/**
 * Container principal da aplicação.
 * Usa flexbox em coluna para organizar: header -> mensagens -> input
 */
.app {
  display: flex;
  flex-direction: column;
  height: 100vh; /* 100% da altura da viewport */
  width: 100vw;  /* 100% da largura da viewport */
  background: white;
}

/* ===== CABEÇALHO ===== */

/**
 * Barra superior com título da aplicação.
 * flex-shrink: 0 garante que não será comprimido quando o conteúdo crescer
 */
header {
  background: #4285f4; /* Azul Google */
  color: white;
  padding: 1rem;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Sombra sutil */
  flex-shrink: 0; /* Não permite que o header seja comprimido */
}

/* ===== CONTAINER DE MENSAGENS ===== */

/**
 * Área principal onde as mensagens são exibidas.
 * 
 * flex: 1 - Ocupa todo o espaço disponível entre header e input
 * overflow-y: auto - Permite scroll vertical quando há muitas mensagens
 * min-height: 0 - Importante para que o flex funcione corretamente com overflow
 */
.chat-container {
  flex: 1; /* Cresce para ocupar espaço disponível */
  overflow-y: auto; /* Scroll vertical quando necessário */
  overflow-x: hidden; /* Previne scroll horizontal */
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem; /* Espaçamento entre mensagens */
  min-height: 0; /* Fix para overflow funcionar corretamente com flexbox */
}

/**
 * Mensagem exibida quando não há conversas ainda.
 * Centralizada vertical e horizontalmente no container.
 */
.empty-state {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: #999;
  font-size: 1.1rem;
}

/* ===== MENSAGENS INDIVIDUAIS ===== */

/**
 * Estilo base para cada mensagem (usuário ou IA).
 * 
 * max-width: min(70%, 600px) - Limita largura a 70% ou 600px (o que for menor)
 * word-break: break-word - Quebra palavras longas para evitar overflow
 */
.message {
  display: flex;
  flex-direction: column;
  max-width: min(70%, 600px); /* Responsivo: 70% em telas pequenas, max 600px em grandes */
  padding: 0.75rem;
  border-radius: 8px;
  animation: fadeIn 0.3s ease; /* Animação de entrada suave */
  word-break: break-word; /* Quebra palavras longas */
}

/* Animação de fade in quando mensagem aparece */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px); /* Começa 10px abaixo */
  }
  to {
    opacity: 1;
    transform: translateY(0); /* Termina na posição normal */
  }
}

/**
 * Estilo específico para mensagens do usuário.
 * Alinhadas à direita com fundo azul.
 */
.message.user {
  align-self: flex-end; /* Alinha à direita */
  background: #4285f4;
  color: white;
}

/**
 * Estilo específico para mensagens da IA.
 * Alinhadas à esquerda com fundo cinza claro.
 */
.message.assistant {
  align-self: flex-start; /* Alinha à esquerda */
  background: #e8eaed;
  color: #202124;
}

/**
 * Cabeçalho da mensagem contendo remetente e horário.
 */
.message-header {
  display: flex;
  justify-content: space-between; /* Nome à esquerda, horário à direita */
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
}

/* Torna o timestamp levemente transparente */
.timestamp {
  opacity: 0.7;
}

/**
 * Conteúdo textual da mensagem.
 * 
 * white-space: pre-wrap - Preserva quebras de linha e espaços
 * word-wrap: break-word - Quebra palavras longas
 */
.message-content {
  white-space: pre-wrap; /* Mantém formatação de texto */
  word-wrap: break-word; /* Quebra palavras muito longas */
}

/* ===== INDICADOR DE CARREGAMENTO ===== */

/**
 * Texto "IA está digitando..." exibido enquanto aguarda resposta.
 * flex-shrink: 0 garante que não será comprimido.
 */
.loading {
  padding: 0.5rem 1rem;
  text-align: center;
  color: #666;
  font-style: italic;
  flex-shrink: 0; /* Não permite compressão */
}

/* ===== CAMPO DE ENTRADA ===== */

/**
 * Formulário de entrada fixo na parte inferior.
 * Contém input de texto e botão de envio lado a lado.
 */
.chat-input {
  display: flex;
  gap: 0.5rem; /* Espaço entre input e botão */
  padding: 1rem;
  border-top: 1px solid #e0e0e0; /* Separador visual */
  background: white;
  flex-shrink: 0; /* Mantém tamanho fixo */
}

/**
 * Campo de texto onde o usuário digita a mensagem.
 * flex: 1 faz ocupar todo o espaço disponível (botão fica fixo à direita)
 */
.chat-input input {
  flex: 1; /* Ocupa espaço disponível */
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 24px; /* Bordas arredondadas estilo chat */
  font-size: 1rem;
  outline: none; /* Remove outline padrão do navegador */
  transition: border-color 0.2s; /* Transição suave ao focar */
}

/* Destaca a borda quando o input está focado */
.chat-input input:focus {
  border-color: #4285f4;
}

/* Visual de input desabilitado (enquanto aguarda resposta) */
.chat-input input:disabled {
  background: #f5f5f5;
  cursor: not-allowed;
}

/**
 * Botão de enviar mensagem.
 */
.chat-input button {
  padding: 0.75rem 1.5rem;
  background: #4285f4;
  color: white;
  border: none;
  border-radius: 24px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s; /* Transição suave ao hover */
}

/* Escurece o botão ao passar o mouse (apenas se habilitado) */
.chat-input button:hover:not(:disabled) {
  background: #357ae8;
}

/* Visual de botão desabilitado */
.chat-input button:disabled {
  background: #ccc;
  cursor: not-allowed;
}
